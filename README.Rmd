---
title: U.S.-Liberia trade
output: rmarkdown::github_document
---

```{r data-prep, echo=FALSE, error=FALSE, message=FALSE, warning=FALSE, eval=TRUE, include=FALSE}
library(htmltab)
library(tidyverse)
library(lubridate)
library(knitr)
library(readxl)
library(httr)

url<-'https://www.census.gov/foreign-trade/balance/country.xlsx'
GET(url, write_disk(TF <- tempfile(fileext = ".xlsx")))
countries <- read_excel(TF)
countries <- as_tibble(countries)
attach(countries)

countries_long <- countries %>%
  pivot_longer(!year:CTYNAME, 
               names_to = c("TYPE","MONTH"), 
               names_pattern = "^(\\D)(\\D\\D\\D)",
               values_to = "AMOUNT"
               ) %>%
  rename(YEAR = year)
suppressMessages(message())
```

## Imports from U.S. (in millions)

```{r imports, echo=FALSE, error=FALSE, message=FALSE, warning=FALSE, eval=TRUE}
imports <- filter(countries_long, TYPE=="I" & CTYNAME=="Liberia")
by_year <- imports %>% group_by(YEAR) %>% summarise(TOTAL = sum(AMOUNT))
kable(by_year)
```

```{r imports-plot, echo=FALSE, error=FALSE, message=FALSE, warning=FALSE, eval=TRUE}
by_year$YEAR <- parse_date_time(by_year$YEAR, "Y")
ggplot(by_year, aes(x = YEAR, y = TOTAL)) +
  geom_line() +
  labs(x = "Year", y = "U.S. dollars (millions)") +
  theme_minimal()
  
```

## Exports to U.S. (in millions)

```{r exports, echo=FALSE, error=FALSE, message=FALSE, warning=FALSE, eval=TRUE}
exports <- filter(countries_long, TYPE=="E" & CTYNAME=="Liberia")
by_year <- exports %>% group_by(YEAR) %>% summarise(TOTAL = sum(AMOUNT))
kable(by_year)
```

```{r exports-plot, echo=FALSE, error=FALSE, message=FALSE, warning=FALSE, eval=TRUE}
by_year$YEAR <- parse_date_time(by_year$YEAR, "Y")
ggplot(by_year, aes(x = YEAR, y = TOTAL)) +
  geom_line() +
  labs(x = "Year", y = "U.S. dollars (millions)") +
  theme_minimal()
```

Source: [U.S. Census Bureau](https://www.census.gov/foreign-trade/balance/c7650.html)
